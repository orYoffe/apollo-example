"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("tslib"),t=require("apollo-client"),n=e(t),o=require("apollo-link"),i=require("apollo-cache-inmemory"),a=require("apollo-link-http"),c=require("apollo-link-error"),s=e(require("graphql-tag")),l=require("ts-invariant"),u=["request","uri","credentials","headers","fetch","fetchOptions","clientState","onError","cacheRedirects","cache","name","version","resolvers","typeDefs","fragmentMatcher"],f=function(e){function t(r){void 0===r&&(r={});if(r){var t=Object.keys(r).filter(function(e){return-1===u.indexOf(e)});t.length}var n=r.request,s=r.uri,f=r.credentials,h=r.headers,p=r.fetch,d=r.fetchOptions,v=r.clientState,m=r.cacheRedirects,b=r.onError,k=r.name,q=r.version,y=r.resolvers,g=r.typeDefs,x=r.fragmentMatcher,O=r.cache;l.invariant(!O||!m),O||(O=m?new i.InMemoryCache({cacheRedirects:m}):new i.InMemoryCache);var E=b?c.onError(b):c.onError(function(e){var r=e.graphQLErrors;e.networkError;r&&r.map(function(e){e.message,e.locations,e.path;return!0})}),w=!!n&&new o.ApolloLink(function(e,r){return new o.Observable(function(t){var o;return Promise.resolve(e).then(function(e){return n(e)}).then(function(){o=r(e).subscribe({next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)})}).catch(t.error.bind(t)),function(){o&&o.unsubscribe()}})}),M=new a.HttpLink({uri:s||"/graphql",fetch:p,fetchOptions:d||{},credentials:f||"same-origin",headers:h||{}}),j=o.ApolloLink.from([E,w,M].filter(function(e){return!!e})),L=y,D=g,_=x;return v&&(v.defaults&&O.writeData({data:v.defaults}),L=v.resolvers,D=v.typeDefs,_=v.fragmentMatcher),e.call(this,{cache:O,link:j,name:k,version:q,resolvers:L,typeDefs:D,fragmentMatcher:_})||this}return r.__extends(t,e),t}(n);Object.keys(t).forEach(function(e){exports[e]=t[e]}),Object.keys(o).forEach(function(e){exports[e]=o[e]}),Object.keys(i).forEach(function(e){exports[e]=i[e]}),exports.HttpLink=a.HttpLink,exports.gql=s,exports.default=f;
